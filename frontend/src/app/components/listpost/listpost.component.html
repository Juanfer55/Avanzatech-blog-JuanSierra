<section class="post">
  <ul class="post-header">
    <li>
      <h1 class="title">
        {{ post.title }}
      </h1>
    </li>
    <li class="post-info">
      <p class="info">Team: {{ post.author.team.name }}</p>
      <p class="info">
        {{ post.author.username }}
      </p>
      <p class="info">
        {{ post.created_at | date : "dd/MM/yyyy HH:mm:ss" }}
      </p>
    </li>
  </ul>
  <ul class="content-container">
    <li class="post-content">
      <p class="post-excerpt">
        {{ post.content_excerpt }}
        <span
          *ngIf="post.content_excerpt.split(' ').length === 200"
          (click)="detailView()"
          class="link"
          >Show More</span
        >
      </p>
    </li>
  </ul>
  <ul class="post-info">
    <ul class="likes-comments">
      <li
        class="likes"
        (click)="likesIsOpen = !likesIsOpen"
        cdkOverlayOrigin
        #likesOverlay="cdkOverlayOrigin"
      >
        <p>{{ totalLikes }} Likes</p>
      </li>
      <li class="comments" (click)="detailView()">
        <p>{{ commentCount }} Comments</p>
      </li>
    </ul>
    <ul class="post-interaction">
      <li *ngIf="user" class="like">
        <fa-icon
          *ngIf="postIsLiked"
          (click)="unlikePost()"
          class="liked"
          [icon]="solidHeartIcon"
          size="2x"
        ></fa-icon>
        <fa-icon
          *ngIf="!postIsLiked"
          (click)="likePost()"
          class="liked"
          [icon]="regularHeartIcon"
          size="2x"
        ></fa-icon>
      </li>
      <li *ngIf="user">
        <fa-icon
          (click)="detailView()"
          [icon]="commentIcon"
          size="2x"
        ></fa-icon>
      </li>
      <li *ngIf="hasEditPermission()">
        <fa-icon [icon]="editIcon" size="2x" (click)="editView()"></fa-icon>
      </li>
      <li *ngIf="hasEditPermission()">
        <fa-icon
          [icon]="trashIcon"
          size="2x"
          (click)="openDeleteDialog()"
        ></fa-icon>
      </li>
    </ul>
  </ul>
</section>
<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="likesOverlay"
  [cdkConnectedOverlayOpen]="likesIsOpen"
>
  <div class="likes-container">
    <ul *ngIf="likes.length === 0">
      <li>
        <p>No likes yet</p>
      </li>
    </ul>
    <ul *ngIf="likes.length > 0">
      <h3>Liked by:</h3>
      <li>
        <p *ngFor="let like of likes">{{ like.user.username }}</p>
      </li>
      <ul *ngIf="likesTotalPages > 1" class="like-navigation">
        <li *ngIf="likesPreviousPage" (click)="getLikes(likesPreviousPage)">
          <fa-icon class="like-navigation-icon" [icon]="previousIcon"></fa-icon>
        </li>
        <li>
          <p>{{ likesCurrentPage }}</p>
        </li>
        <li *ngIf="likesNextPage" (click)="getLikes(likesNextPage)">
          <fa-icon class="like-navigation-icon" [icon]="nextIcon"></fa-icon>
        </li>
      </ul>
    </ul>
  </div>
</ng-template>
